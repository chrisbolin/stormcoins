(this.webpackJsonpstormcoins=this.webpackJsonpstormcoins||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),a=n(4),i=n.n(a),r=(n(10),n(2)),l=(n(11),n(1)),s={score:0,lastScore:0,bestScore:0,paused:!0,engine:!1,timestamp:0,positionX:60,positionY:0,velocityX:0,velocityY:0,coinVisible:!0,coinX:30,coinY:35,windVelocityX:.04},u={type:"start_engine"},m={type:"stop_engine"};function p(e,t){switch(t.type){case"tick":var n=t.timestamp,o=e.coinVisible,c=e.score,a=e.positionX,i=e.positionY,r=e.velocityX,u=e.velocityY,m=e.coinX,p=e.coinY,v=e.windVelocityX,f=n-e.timestamp;if(a=(a+f*r+100)%100,e.paused)return Object(l.a)({},e,{timestamp:n});if(!e.coinVisible&&0===e.positionY&&Math.abs(e.velocityX)<1e-4)o=!0,r=0,m=(m+70)%90,p=(p+10.5)%(42*.9),v+=.005;else if(!e.engine&&e.positionY<=0&&e.positionX>45&&e.positionX<75&&-e.velocityY<.05)i=0,u=0,r=.9*e.velocityX;else{if(e.positionY<0||e.positionY>1e3)return Object(l.a)({},s,{lastScore:c,bestScore:c>e.bestScore?c:e.bestScore,timestamp:n});var b=v-r;u=e.velocityY+(1375e-7*Number(e.engine)-55e-6)*f,r=e.velocityX+Math.pow(b,2)*Math.sign(b)*.01*f,i=e.positionY+f*e.velocityY}return o&&e.positionX-e.coinX<4&&e.coinX-e.positionX<10&&e.positionY-e.coinY<8&&e.coinY-e.positionY<4&&(o=!1,c+=100),Object(l.a)({},e,{timestamp:n,positionX:a,positionY:i,velocityX:r,velocityY:u,coinX:m,coinY:p,score:c,coinVisible:o,windVelocityX:v});case"start_engine":return Object(l.a)({},e,{paused:!1,engine:!0});case"stop_engine":return Object(l.a)({},e,{engine:!1});case"restart":return Object(l.a)({},s,{timestamp:e.timestamp});default:throw new Error("Invalid action: ".concat(JSON.stringify(t)))}}var v=Object(o.createContext)((function(e){})),f=Object(o.createContext)(s);function b(e,t){return e.forEach((function(e){return window.addEventListener(e,t)})),function(){return e.forEach((function(e){return window.removeEventListener(e,t)}))}}function d(){return c.a.createElement("div",{className:"platform",style:{left:"".concat(50,"vw"),width:"".concat(30,"vw")}},"platform")}function w(){var e=Object(o.useContext)(f),t=e.positionX,n=e.positionY,a="".concat(t,"vw"),i="".concat(t-100,"vw"),r="".concat(n,"vw"),l="".concat(10,"vw"),s="".concat(6,"vw");return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"vehicle",style:{left:a,bottom:r,width:l,height:s}},"helicopter"),c.a.createElement("div",{className:"vehicle",style:{left:i,bottom:r,width:l,height:s}},"helicopter"))}function h(){var e=Object(o.useContext)(f),t=e.coinX,n=e.coinY;return e.coinVisible?c.a.createElement("div",{className:"coin",style:{left:"".concat(t,"vw"),bottom:"".concat(n,"vw"),width:"".concat(4,"vw"),height:"".concat(8,"vw")}},"coin"):null}function E(){var e=Object(o.useContext)(f);return"3000"!==window.location.port?null:c.a.createElement("pre",{style:{margin:0,position:"absolute",bottom:0,left:0}},JSON.stringify(e,null,2))}function y(){return c.a.createElement("h3",null,"Goal: get coin, land, repeat.",c.a.createElement("br",null),"Control: spacebar [computer] or tap [phone]",c.a.createElement("br",null),"The wind will push you. Don't land too hard.")}function g(){var e=Object(o.useContext)(f),t=e.paused,n=e.score,a=e.bestScore,i=e.lastScore,r=e.windVelocityX,l=e.velocityX;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"score: ",n,c.a.createElement("br",null),"best: ",a,"; last: ",i,c.a.createElement("br",null),"speed: ",Math.round(1e3*l),c.a.createElement("br",null),"wind speed: ",Math.round(1e3*r)),t&&c.a.createElement(y,null))}function S(){return c.a.createElement("div",{className:"ViewportWarning"},c.a.createElement("h3",null,"Can you make your browser taller? You can't see all of the game."))}function X(){var e=Object(o.useContext)(v);return c.a.createElement("div",{className:"GamePad",onTouchStart:function(){return e(u)},onTouchEnd:function(){return e(m)}})}var O=Object(o.memo)((function(){return c.a.createElement("div",{className:"scene",style:{height:"".concat(42,"vw"),width:"".concat(100,"vw")}},c.a.createElement(g,null),c.a.createElement(E,null),c.a.createElement(d,null),c.a.createElement(h,null),c.a.createElement(w,null),c.a.createElement(S,null),c.a.createElement(X,null))}));function Y(e){return parseFloat(localStorage.getItem(e)||"")||0}function j(e,t){localStorage.setItem(e,t.toString())}var k=function(){var e=function(e){var t=Object(o.useReducer)(p,null,(function(){return Object(l.a)({},s,{},e())})),n=Object(r.a)(t,2),c=n[0],a=n[1],i=Object(o.useCallback)((function(e){a({type:"tick",timestamp:e}),window.requestAnimationFrame(i)}),[]);return Object(o.useEffect)((function(){window.requestAnimationFrame(i)}),[i]),[c,a]}((function(){return{bestScore:Y("bestScore"),lastScore:Y("lastScore")}})),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(o.useEffect)((function(){return function(e){var t=b(["keydown"],(function(t){32===t.keyCode&&e(u)})),n=b(["keyup"],(function(t){32===t.keyCode&&e(m)}));return function(){t(),n()}}(a)}),[a]),Object(o.useEffect)((function(){j("bestScore",n.bestScore),j("lastScore",n.lastScore)}),[n.lastScore,n.bestScore]),c.a.createElement(v.Provider,{value:a},c.a.createElement(f.Provider,{value:n},c.a.createElement("div",{className:"App"},c.a.createElement(O,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.747eb4d5.chunk.js.map