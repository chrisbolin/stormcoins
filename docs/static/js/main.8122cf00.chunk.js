(this.webpackJsonpstormcoins=this.webpackJsonpstormcoins||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),i=n(4),a=n.n(i),r=(n(10),n(2)),l=(n(11),n(1)),s={score:0,lastScore:0,bestScore:0,paused:!0,engine:!1,timestamp:0,positionX:60,positionY:0,velocityX:0,velocityY:0,coinVisible:!0,coinX:30,coinY:35,windVelocityX:.04},u={type:"start_engine"},m={type:"stop_engine"};function p(e,t){switch(t.type){case"tick":var n=e.coinVisible,o=e.score,c=e.positionX,i=e.positionY,a=e.velocityX,r=e.velocityY,u=e.coinX,m=e.coinY,p=e.windVelocityX,f=t.timestamp-e.timestamp;if(c=(c+f*a+100)%100,e.paused)return Object(l.a)({},e,{timestamp:t.timestamp});if(!e.coinVisible&&0===e.positionY&&Math.abs(e.velocityX)<1e-4)n=!0,a=0,u=(u+70)%90,m=(m+10.5)%(42*.9),p+=.005;else if(!e.engine&&e.positionY<=0&&e.positionX>45&&e.positionX<75&&-e.velocityY<.05)i=0,r=0,a=.9*e.velocityX;else{if(e.positionY<0||e.positionY>1e3)return Object(l.a)({},s,{lastScore:o,bestScore:o>e.bestScore?o:e.bestScore});var v=p-a;r=e.velocityY+(1375e-7*Number(e.engine)-55e-6)*f,a=e.velocityX+Math.pow(v,2)*Math.sign(v)*.01*f,i=e.positionY+f*e.velocityY}return n&&e.positionX-e.coinX<4&&e.coinX-e.positionX<10&&e.positionY-e.coinY<8&&e.coinY-e.positionY<4&&(n=!1,o+=100),Object(l.a)({},e,{timestamp:t.timestamp,positionX:c,positionY:i,velocityX:a,velocityY:r,coinX:u,coinY:m,score:o,coinVisible:n,windVelocityX:p});case"start_engine":return Object(l.a)({},e,{paused:!1,engine:!0});case"stop_engine":return Object(l.a)({},e,{engine:!1});case"restart":return Object(l.a)({},s);default:throw new Error("Invalid action: ".concat(JSON.stringify(t)))}}var f=Object(o.createContext)((function(e){})),v=Object(o.createContext)(s);function b(e,t){return e.forEach((function(e){return window.addEventListener(e,t)})),function(){return e.forEach((function(e){return window.removeEventListener(e,t)}))}}function d(){return c.a.createElement("div",{className:"platform",style:{left:"".concat(50,"vw"),width:"".concat(30,"vw")}},"platform")}function w(){var e=Object(o.useContext)(v),t=e.positionX,n=e.positionY;return c.a.createElement("div",{className:"vehicle",style:{left:"".concat(t,"vw"),bottom:"".concat(n,"vw"),width:"".concat(10,"vw"),height:"".concat(6,"vw")}},"helicopter")}function h(){var e=Object(o.useContext)(v),t=e.coinX,n=e.coinY;return e.coinVisible?c.a.createElement("div",{className:"coin",style:{left:"".concat(t,"vw"),bottom:"".concat(n,"vw"),width:"".concat(4,"vw"),height:"".concat(8,"vw")}},"coin"):null}function E(){var e=Object(o.useContext)(v);return"3000"!==window.location.port?null:c.a.createElement("pre",{style:{margin:0,position:"absolute",bottom:0,left:0}},JSON.stringify(e,null,2))}function y(){return c.a.createElement("h3",null,"Goal: get coin, land, repeat.",c.a.createElement("br",null),"Control: spacebar [computer] or tap [phone]",c.a.createElement("br",null),"The wind will push you. Don't land too hard.")}function g(){var e=Object(o.useContext)(v),t=e.paused,n=e.score,i=e.bestScore,a=e.lastScore,r=e.windVelocityX,l=e.velocityX;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"score: ",n,c.a.createElement("br",null),"best: ",i,"; last: ",a,c.a.createElement("br",null),"speed: ",Math.round(1e3*l),c.a.createElement("br",null),"wind speed: ",Math.round(1e3*r)),t&&c.a.createElement(y,null))}function S(){return c.a.createElement("div",{className:"ViewportWarning"},c.a.createElement("h3",null,"Can you make your browser taller? You can't see all of the game."))}function X(){var e=Object(o.useContext)(f);return c.a.createElement("div",{className:"GamePad",onTouchStart:function(){return e(u)},onTouchEnd:function(){return e(m)}})}var O=Object(o.memo)((function(){return c.a.createElement("div",{className:"scene",style:{height:"".concat(42,"vw"),width:"".concat(100,"vw")}},c.a.createElement(g,null),c.a.createElement(E,null),c.a.createElement(d,null),c.a.createElement(h,null),c.a.createElement(w,null),c.a.createElement(S,null),c.a.createElement(X,null))}));function Y(e){return parseFloat(localStorage.getItem(e)||"")||0}function j(e,t){localStorage.setItem(e,t.toString())}var k=function(){var e=function(e){var t=Object(o.useReducer)(p,null,(function(){return Object(l.a)({},s,{},e())})),n=Object(r.a)(t,2),c=n[0],i=n[1],a=Object(o.useCallback)((function(e){i({type:"tick",timestamp:e}),window.requestAnimationFrame(a)}),[]);return Object(o.useEffect)((function(){window.requestAnimationFrame(a)}),[a]),[c,i]}((function(){return{bestScore:Y("bestScore"),lastScore:Y("lastScore")}})),t=Object(r.a)(e,2),n=t[0],i=t[1];return Object(o.useEffect)((function(){return function(e){var t=b(["keydown"],(function(t){32===t.keyCode&&e(u)})),n=b(["keyup"],(function(t){32===t.keyCode&&e(m)}));return function(){t(),n()}}(i)}),[i]),Object(o.useEffect)((function(){j("bestScore",n.bestScore),j("lastScore",n.lastScore)}),[n.lastScore,n.bestScore]),c.a.createElement(f.Provider,{value:i},c.a.createElement(v.Provider,{value:n},c.a.createElement("div",{className:"App"},c.a.createElement(O,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.8122cf00.chunk.js.map